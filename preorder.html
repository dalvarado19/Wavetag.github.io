<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pre-Order</title>
  <link rel="stylesheet" href="style.css">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-X7PF228XDR"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-BEQBDX9FGW');
    gtag('event', 'pre-order_page_view');
  </script>
</head>
<body>
  <header>
    <h1>Reserve Yours Today!</h1>
    <p>Select your quantity and payment method below.</p>
  </header>

  <main class="preorder-container">
    <!-- Left side: Product info -->
    <section class="product-info">
      <img src="images/Wavetag.jpg" alt="Prototype Tracking Device" class="device-image">

      <h2>Prototype Tracker</h2>

      <div class="price-details">
        <label for="quantity">Quantity:</label>
        <input 
          type="number" 
          id="quantity" 
          name="quantity" 
          min="1" 
          inputmode="numeric"
          value="1"
          onchange="updateTotal()"
        >
        <p id="total">
          Total: 
          <span class="old-price" id="old-price">$14.99</span>
          <span class="new-price" id="new-price">$4.99</span>
        </p>
      </div>
    </section>

    <!-- Right side: Payment options -->
    <section class="payment-options">
      <h2>Choose Your Payment Method</h2>

      <div class="payment-buttons">
        <!-- Apple Pay -->
        <a href="error.html" class="pay-btn apple-pay" onclick="gtag('event', 'apple_pay_click');">
          <img src="images/Apple_Pay_logo.svg" alt="Apple Pay logo" class="pay-logo">
        </a>

        <!-- Google Pay -->
        <a href="error.html" class="pay-btn apple-pay" onclick="gtag('event', 'google_pay_click');">
          <img src="images/Google_Pay_Logo.svg" alt="Google Pay logo" class="pay-logo">
        </a>

        <!-- PayPal -->
        <a href="error.html" class="pay-btn paypal" onclick="gtag('event', 'paypal_click');">
          <img src="images/PayPal_Logo.svg" alt="PayPal logo" class="pay-logo">
        </a>

        <!-- Venmo -->
        <a href="error.html" class="pay-btn venmo" onclick="gtag('event', 'venmo_click');">
          <img src="images/Venmo-logo.png" alt="Venmo logo" class="pay-logo">
        </a>
      </div>
    </section>
  </main>

  <script>
    const quantityInput = document.getElementById('quantity');
    const oldPriceDisplay = document.getElementById('old-price');
    const newPriceDisplay = document.getElementById('new-price');

    const OLD_PRICE_PER_ITEM = 14.99;
    const NEW_PRICE_PER_ITEM = 4.99;

    // Update total prices dynamically
    function updateTotal() {
      const qty = parseInt(quantityInput.value) || 1;
      const oldTotal = qty * OLD_PRICE_PER_ITEM;
      const newTotal = qty * NEW_PRICE_PER_ITEM;

      oldPriceDisplay.innerText = `$${oldTotal.toFixed(2)}`;
      newPriceDisplay.innerText = `$${newTotal.toFixed(2)}`;

      localStorage.setItem('quantity', qty);
    }

    // Restore quantity on reload
    window.addEventListener('DOMContentLoaded', () => {
      const savedQty = localStorage.getItem('quantity');
      if (savedQty && !isNaN(savedQty)) {
        quantityInput.value = savedQty;
      }
      updateTotal();
    });
  </script>
</body>
</html>
